---
layout: default
---

<article class="episode-detail">
  <div class="container">
    <header class="episode-detail-header">
      <div class="episode-meta">
        <a href="/1755269/episodes" class="back-link">← All Episodes</a>
        <span class="episode-number">#<%= resource.data.data[:episode_number] %></span>
      </div>

      <h1><%= resource.data.title %></h1>

      <div class="episode-info">
        <% if resource.data.data[:pub_date] %>
          <time datetime="<%= resource.data.data[:pub_date] %>">
            <%= resource.data.data[:pub_date].strftime('%B %d, %Y') %>
          </time>
        <% end %>
        <% if resource.data.data[:duration] %>
          <span class="duration"><%= format_duration(resource.data.data[:duration]) %></span>
        <% end %>
      </div>
    </header>

    <div class="audio-player-wrapper">
      <audio controls class="audio-player" preload="metadata">
        <source src="<%= resource.data.data[:audio_url] %>" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </div>

    <div class="episode-description">
      <%= resource.content.to_s.html_safe %>
    </div>

    <nav class="episode-navigation">
      <% episodes = site.data.episodes %>
      <% current_index = episodes.index { |ep| ep[:title] == resource.data.title } %>

      <% if current_index && current_index < episodes.length - 1 %>
        <% prev_episode = episodes[current_index + 1] %>
        <a href="/1755269/episodes/<%= prev_episode[:slug] %>" class="nav-link prev">
          <span class="nav-label">← Previous</span>
          <span class="nav-title"><%= truncate(prev_episode[:title], 60) %></span>
        </a>
      <% else %>
        <div></div>
      <% end %>

      <% if current_index && current_index > 0 %>
        <% next_episode = episodes[current_index - 1] %>
        <a href="/1755269/episodes/<%= next_episode[:slug] %>" class="nav-link next">
          <span class="nav-label">Next →</span>
          <span class="nav-title"><%= truncate(next_episode[:title], 60) %></span>
        </a>
      <% end %>
    </nav>
  </div>
</article>
